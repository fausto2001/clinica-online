"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[394],{8394:(U,f,s)=>{s.r(f),s.d(f,{PacientesModule:()=>D});var g=s(6814),h=s(2271),r=s(3960),d=s(5017),x=s(9315),l=s(8180),m=s(4664),b=s(2459),p=s(5588),t=s(4946),_=s(2333),v=s(721);function P(n,a){1&n&&(t.TgZ(0,"div",4)(1,"div",5)(2,"span",6),t._uU(3,"Cargando..."),t.qZA()(),t.TgZ(4,"p",7),t._uU(5,"Cargando..."),t.qZA()())}function C(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"p",15),t._uU(2),t.qZA(),t.TgZ(3,"button",16)(4,"img",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw(3);return t.KtG(u.pacClick(c))}),t.qZA()()()}if(2&n){const e=a.$implicit;t.xp6(2),t.AsE("",e.nombre," ",e.apellido,""),t.xp6(2),t.MGl("alt","Foto de ",e.nombre,""),t.Q6J("src",e.foto,t.LSH)}}function T(n,a){if(1&n&&(t.TgZ(0,"div",11)(1,"h1",12),t._uU(2,"Elija su paciente"),t.qZA(),t.YNc(3,C,5,4,"div",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",e.fotosPacientes)}}function Z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,c=t.oxw(3);return t.KtG(c.histClinica(o.historiaClinica))}),t._uU(2,"Leer"),t.qZA()()}}function y(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.YNc(9,Z,3,0,"td",10),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.dia),t.xp6(2),t.Oqu(e.start),t.xp6(2),t.Oqu(e.especialidad),t.xp6(2),t.Oqu(e.comentarioPac),t.xp6(1),t.Q6J("ngIf",e.historiaClinica)}}function O(n,a){if(1&n&&(t.TgZ(0,"div")(1,"table",18)(2,"thead",19)(3,"tr")(4,"th",20),t._uU(5,"Fecha"),t.qZA(),t.TgZ(6,"th",20),t._uU(7,"Hora"),t.qZA(),t.TgZ(8,"th",20),t._uU(9,"Especialidad"),t.qZA(),t.TgZ(10,"th",20),t._uU(11,"Rese\xf1a"),t.qZA(),t.TgZ(12,"th",20),t._uU(13,"Historia cl\xednica"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,y,10,5,"tr",21),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(15),t.Q6J("ngForOf",e.currentTurnos)}}function M(n,a){if(1&n&&(t.TgZ(0,"div")(1,"h1",12),t._uU(2,"Historia cl\xednica"),t.qZA(),t.TgZ(3,"h3"),t._uU(4),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(e.historiaClinicaTxt)}}function k(n,a){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,T,4,1,"div",9),t.YNc(2,O,16,1,"div",10),t.YNc(3,M,5,1,"div",10),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.loading&&1==e.step),t.xp6(1),t.Q6J("ngIf",!e.loading&&2==e.step),t.xp6(1),t.Q6J("ngIf",!e.loading&&3==e.step)}}function A(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.volver())}),t.qZA()}}const F=function(){return["/mi-perfil"]};let E=(()=>{class n{constructor(e,i,o){this.service=e,this.fire=i,this.firebase=o,this.storage=(0,d.cF)(this.firebase),this.fotosRef=(0,d.iH)(this.storage),this.loading=!0,this.especialistas=[],this.especialidades=[],this.pacientes=[],this.fotos=[],this.fotosEspecialistas=[],this.fotosPacientes=[],this.turnos=[],this.currentTurnos=[],this.step=1,this.pacienteElegido="",this.historiaClinicaTxt="",this.service.currentUser.subscribe(c=>{this.usuarioActual=c,console.log(this.usuarioActual)})}ngOnInit(){(0,x.D)({especialidades:this.getEspecialidades().pipe((0,l.q)(1)),especialistas:this.getEspecialistas().pipe((0,l.q)(1)),pacientes:this.getPacientes().pipe((0,l.q)(1)),turnos:this.getTurnos().pipe((0,l.q)(1))}).pipe((0,m.w)(({especialidades:e,especialistas:i,pacientes:o,turnos:c})=>(this.especialidades=e,this.especialistas=i,this.pacientes=o,this.turnos=c,this.getFotos().pipe((0,l.q)(1))))).subscribe({next:e=>{this.fotos=e,this.loading=!1,this.filterFotos(),console.log(this.fotosPacientes)},error:()=>{this.loading=!1}})}getEspecialistas(){const e=(0,p.hJ)(this.fire,"especialistas");return(0,r.BS)(e,{idField:"idDoc"})}getPacientes(){const e=(0,p.hJ)(this.fire,"pacientes");return(0,r.BS)(e,{idField:"idDoc"})}getEspecialidades(){const e=(0,p.hJ)(this.fire,"especialidades");return(0,r.BS)(e)}getFotos(){return(0,b.D)((0,d.aF)(this.fotosRef)).pipe((0,m.w)(e=>{const i=e.items.map(o=>(0,d.Jt)(o));return(0,x.D)(i)}))}getTurnos(){const e=(0,p.hJ)(this.fire,"turnos");return(0,r.BS)(e,{idField:"idDoc"})}filterFotos(){this.fotos.forEach(e=>{this.turnos.forEach(i=>{i.especialista==this.usuarioActual.dni&&this.pacientes.forEach(o=>{if(i.paciente==o.dni&&e.includes(o.dni)&&e.includes("perfil")){let c={nombre:o.nombre,apellido:o.apellido,dni:o.dni,foto:e};this.fotosPacientes.some(u=>u.nombre==o.nombre)||this.fotosPacientes.push(c)}})})})}pacClick(e){this.currentTurnos=[],this.pacienteElegido=e,this.step=2,console.log(this.pacienteElegido),this.turnos.forEach(i=>{i.especialista==this.usuarioActual.dni&&i.paciente==this.pacienteElegido.dni&&(this.currentTurnos.push(i),console.log(i))})}histClinica(e){console.log(e),this.historiaClinicaTxt="Altura: "+e.altura+"\nPeso: "+e.peso+"\nPresi\xf3n: "+e.presion+"\nTemperatura: "+e.temperatura,e.dynamicData[0].clave&&(this.historiaClinicaTxt=this.historiaClinicaTxt+"\n"+e.dynamicData[0].clave+": "+e.dynamicData[0].valor),e.dynamicData[1]&&(this.historiaClinicaTxt=this.historiaClinicaTxt+"\n"+e.dynamicData[1].clave+": "+e.dynamicData[1].valor),e.dynamicData[2]&&(this.historiaClinicaTxt=this.historiaClinicaTxt+"\n"+e.dynamicData[2].clave+": "+e.dynamicData[2].valor),this.step=3}volver(){this.step--}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(_.e),t.Y36(r.gg),t.Y36(v.Ot))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-pacientes"]],decls:5,vars:5,consts:[["class","loading-overlay",4,"ngIf"],["class","container mt-5",4,"ngIf"],[1,"floating-button",3,"routerLink"],["class","floating-button-2",3,"click",4,"ngIf"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],[1,"text-light","mt-2"],[1,"container","mt-5"],["class","appointments-container",4,"ngIf"],[4,"ngIf"],[1,"appointments-container"],[1,"title"],["class","paciente-button",4,"ngFor","ngForOf"],[1,"paciente-button"],[1,"p-name"],[1,"foto-button"],[1,"foto",3,"src","alt","click"],[1,"table","table-striped","table-bordered","table-hover"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"floating-button-2",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"body"),t.YNc(1,P,6,0,"div",0),t.YNc(2,k,4,3,"div",1),t.qZA(),t._UZ(3,"button",2),t.YNc(4,A,1,0,"button",3)),2&i&&(t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("routerLink",t.DdM(4,F)),t.xp6(1),t.Q6J("ngIf",1!=o.step))},dependencies:[g.sg,g.O5,h.rH],styles:["body[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#c70707;background-image:url(clinic.0a0eb57132030e74.jpg);background-repeat:no-repeat;background-attachment:fixed;background-size:cover;color:#000;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.loading-overlay[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:4rem;height:4rem}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff;margin-top:10px}.appointments-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px;padding:20px}.container[_ngcontent-%COMP%]{background:rgba(255,255,255,.8);border-radius:15px;padding:20px;box-shadow:0 10px 20px #0003}.paciente-button[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;text-align:center;background-color:#000000b3;padding:10px 20px;border-radius:8px;box-shadow:0 4px 6px #0000001a;opacity:0;transform:translateY(-20px);animation:_ngcontent-%COMP%_slideIn .5s forwards ease-out}@keyframes _ngcontent-%COMP%_slideIn{to{opacity:1;transform:translateY(0)}}.foto-button[_ngcontent-%COMP%]{background-color:#fff;border:none;border-radius:50%;width:120px;height:120px;overflow:hidden;display:flex;justify-content:center;align-items:center;box-shadow:0 4px 8px #0000001a;cursor:pointer;transition:transform .3s ease}.foto-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.foto[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:50%;object-fit:cover}.p-name[_ngcontent-%COMP%]{margin-top:8px;font-size:1rem;color:#333;background-color:#fff;padding:4px 8px;border-radius:4px}.floating-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;width:140px;height:140px;border-radius:50%;background-color:#f99;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(casa.ee7bd0ec07fb5d4a.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}.floating-button-2[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;width:140px;height:140px;border-radius:50%;background-color:#004506;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(volver.4bac84a269842765.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:center}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700}"]})}return n})();var J=s(6223);const q=[{path:"",component:E}];let D=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[g.ez,J.u5,h.Bz.forChild(q)]})}return n})()}}]);
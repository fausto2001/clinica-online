"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[462],{5462:(ui,x,c)=>{c.r(x),c.d(x,{MiPerfilModule:()=>li});var g=c(6814),f=c(2271),b=c(5861),h=c(5017),C=c(1382),d=c(3960),A=c(9846),i=(c(3403),c(4946)),m=c(2333),T=c(721);function k(e,r){1&e&&i._UZ(0,"img",19)}function P(e,r){1&e&&i._UZ(0,"img",20)}function y(e,r){1&e&&i._UZ(0,"img",21)}function E(e,r){1&e&&(i.TgZ(0,"h3"),i._uU(1,"Foto de perfil:"),i.qZA())}function w(e,r){1&e&&(i.TgZ(0,"h3"),i._uU(1,"Foto de perfil y de DNI:"),i.qZA())}function J(e,r){if(1&e&&i._UZ(0,"img",22),2&e){const t=i.oxw(2);i.s9C("src",t.foto2,i.LSH)}}function U(e,r){if(1&e&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&e){const t=i.oxw(3);i.xp6(1),i.hij("Segunda especialidad: ",t.usuarioActual.segundaEspecialidad,"")}}function O(e,r){if(1&e&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&e){const t=i.oxw(3);i.xp6(1),i.hij("Tercera especialidad: ",t.usuarioActual.terceraEspecialidad,"")}}const H=function(){return["mis-horarios"]},v=function(){return["/mis-turnos"]},F=function(){return["/pacientes"]};function q(e,r){if(1&e&&(i.TgZ(0,"div",23)(1,"h4"),i._uU(2,"Informaci\xf3n del Especialista:"),i.qZA(),i.TgZ(3,"p"),i._uU(4),i.qZA(),i.YNc(5,U,2,1,"p",4),i.YNc(6,O,2,1,"p",4),i.TgZ(7,"p"),i._uU(8),i.qZA(),i.TgZ(9,"p"),i._uU(10),i.qZA(),i.TgZ(11,"button",24),i._uU(12,"Mis horarios"),i.qZA(),i.TgZ(13,"button",24),i._uU(14,"Mis turnos"),i.qZA(),i.TgZ(15,"button",24),i._uU(16,"Pacientes"),i.qZA()()),2&e){const t=i.oxw(2);i.xp6(4),i.hij("Especialidad: ",t.usuarioActual.especialidad,""),i.xp6(1),i.Q6J("ngIf",t.usuarioActual.segundaEspecialidad),i.xp6(1),i.Q6J("ngIf",t.usuarioActual.terceraEspecialidad),i.xp6(2),i.hij("DNI: ",t.usuarioActual.dni,""),i.xp6(2),i.hij("Mail: ",t.usuarioActual.mail,""),i.xp6(1),i.Q6J("routerLink",i.DdM(8,H)),i.xp6(2),i.Q6J("routerLink",i.DdM(9,v)),i.xp6(2),i.Q6J("routerLink",i.DdM(10,F))}}const M=function(){return["/solicitar-turno"]},j=function(){return["/usuarios"]},I=function(){return["/turnos"]};function N(e,r){if(1&e&&(i.TgZ(0,"div",23)(1,"h4"),i._uU(2,"Informaci\xf3n del Administrador:"),i.qZA(),i.TgZ(3,"p"),i._uU(4),i.qZA(),i.TgZ(5,"p"),i._uU(6),i.qZA(),i.TgZ(7,"button",24),i._uU(8,"Solicitar turno"),i.qZA(),i.TgZ(9,"button",24),i._uU(10,"Secci\xf3n usuarios"),i.qZA(),i.TgZ(11,"button",24),i._uU(12,"Turnos"),i.qZA()()),2&e){const t=i.oxw(2);i.xp6(4),i.hij("DNI: ",t.usuarioActual.dni,""),i.xp6(2),i.hij("Mail: ",t.usuarioActual.mail,""),i.xp6(1),i.Q6J("routerLink",i.DdM(5,M)),i.xp6(2),i.Q6J("routerLink",i.DdM(6,j)),i.xp6(2),i.Q6J("routerLink",i.DdM(7,I))}}function Q(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"div",23)(1,"h4"),i._uU(2,"Informaci\xf3n del Paciente:"),i.qZA(),i.TgZ(3,"p"),i._uU(4),i.qZA(),i.TgZ(5,"p"),i._uU(6),i.qZA(),i.TgZ(7,"button",24),i._uU(8,"Solicitar turno"),i.qZA(),i.TgZ(9,"button",24),i._uU(10,"Mis turnos"),i.qZA(),i.TgZ(11,"button",25),i.NdJ("click",function(){i.CHM(t);const n=i.oxw(2);return i.KtG(n.pdf())}),i._uU(12,"Descarga de PDF"),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(4),i.hij("DNI: ",t.usuarioActual.dni,""),i.xp6(2),i.hij("Mail: ",t.usuarioActual.mail,""),i.xp6(1),i.Q6J("routerLink",i.DdM(4,M)),i.xp6(2),i.Q6J("routerLink",i.DdM(5,v))}}function D(e,r){if(1&e&&(i.TgZ(0,"div")(1,"div",7)(2,"div",8)(3,"div",9),i.YNc(4,k,1,0,"img",10),i.YNc(5,P,1,0,"img",11),i.YNc(6,y,1,0,"img",12),i.qZA(),i.TgZ(7,"div",13)(8,"h1"),i._uU(9),i.qZA(),i.TgZ(10,"h3"),i._uU(11),i.qZA()()(),i.TgZ(12,"div",14),i.YNc(13,E,2,0,"h3",4),i.YNc(14,w,2,0,"h3",4),i.TgZ(15,"div",15),i._UZ(16,"img",16),i.YNc(17,J,1,1,"img",17),i.YNc(18,q,17,11,"div",18),i.YNc(19,N,13,8,"div",18),i.YNc(20,Q,13,6,"div",18),i.qZA()()()()),2&e){const t=i.oxw();i.xp6(4),i.Q6J("ngIf","especialista"==t.usuarioActual.perfil),i.xp6(1),i.Q6J("ngIf","paciente"==t.usuarioActual.perfil),i.xp6(1),i.Q6J("ngIf","admin"==t.usuarioActual.perfil),i.xp6(3),i.AsE("",t.usuarioActual.nombre," ",t.usuarioActual.apellido,""),i.xp6(2),i.hij("Perfil: ",t.usuarioActual.perfil,""),i.xp6(2),i.Q6J("ngIf","especialista"==t.usuarioActual.perfil||"admin"==t.usuarioActual.perfil),i.xp6(1),i.Q6J("ngIf","paciente"==t.usuarioActual.perfil),i.xp6(2),i.s9C("src",t.foto1,i.LSH),i.xp6(1),i.Q6J("ngIf",t.paciente),i.xp6(1),i.Q6J("ngIf","especialista"==t.usuarioActual.perfil),i.xp6(1),i.Q6J("ngIf","admin"==t.usuarioActual.perfil),i.xp6(1),i.Q6J("ngIf","paciente"==t.usuarioActual.perfil)}}function Y(e,r){1&e&&i._UZ(0,"img",19)}function S(e,r){1&e&&i._UZ(0,"img",20)}function z(e,r){1&e&&i._UZ(0,"img",21)}function $(e,r){1&e&&(i.TgZ(0,"h3"),i._uU(1,"Especialistas con los que se ha atendido:"),i.qZA())}function G(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"div",29)(1,"div",30)(2,"div",31)(3,"h4",32),i._uU(4),i.qZA(),i.TgZ(5,"button",33),i.NdJ("click",function(){const a=i.CHM(t).$implicit,s=i.oxw(2);return i.KtG(s.pdfDownload(a))}),i._uU(6," Descargar informaci\xf3n de turnos con este especialista"),i.qZA()()()()}if(2&e){const t=r.$implicit;i.xp6(4),i.AsE("Especialista ",t.nombre," ",t.apellido,"")}}function L(e,r){if(1&e&&(i.TgZ(0,"div")(1,"div",7)(2,"div",8)(3,"div",9),i.YNc(4,Y,1,0,"img",10),i.YNc(5,S,1,0,"img",11),i.YNc(6,z,1,0,"img",12),i.qZA(),i.TgZ(7,"div",13)(8,"h1"),i._uU(9),i.qZA(),i.TgZ(10,"h3"),i._uU(11),i.qZA()()(),i.TgZ(12,"div",14),i.YNc(13,$,2,0,"h3",4),i.TgZ(14,"div",26)(15,"div",27),i.YNc(16,G,7,2,"div",28),i.qZA()()()()()),2&e){const t=i.oxw();i.xp6(4),i.Q6J("ngIf","especialista"==t.usuarioActual.perfil),i.xp6(1),i.Q6J("ngIf","paciente"==t.usuarioActual.perfil),i.xp6(1),i.Q6J("ngIf","admin"==t.usuarioActual.perfil),i.xp6(3),i.AsE("",t.usuarioActual.nombre," ",t.usuarioActual.apellido,""),i.xp6(2),i.hij("Perfil: ",t.usuarioActual.perfil,""),i.xp6(2),i.Q6J("ngIf","paciente"==t.usuarioActual.perfil),i.xp6(3),i.Q6J("ngForOf",t.currentEspecialistas)}}function K(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"button",34),i.NdJ("click",function(){i.CHM(t);const n=i.oxw();return i.KtG(n.volver())}),i.qZA()}}const R=function(){return[""]};let B=(()=>{class e{prepareRoute(t){return t&&t.activatedRouteData&&t.activatedRouteData.animation}constructor(t,o,n){this.service=t,this.firebase=o,this.fire=n,this.storage=(0,h.cF)(this.firebase),this.fotosRef=(0,h.iH)(this.storage),this.foto1="",this.foto2="",this.paciente=!1,this.step=1,this.pacientes=[],this.especialistas=[],this.turnos=[],this.currentEspecialistas=[],this.pacienteTurnos=[],this.usuarioActual=t.currentUser,this.usuarioActual=this.usuarioActual.source.value,"paciente"==this.usuarioActual.perfil&&(this.paciente=!0),console.info(this.usuarioActual),this.getFoto(),this.getPacientes().subscribe(a=>{this.pacientes=a}),this.getTurnos().subscribe(a=>{this.turnos=a}),this.getEspecialistas().subscribe(a=>{this.especialistas=a})}getFoto(){var t=this;return(0,b.Z)(function*(){yield(0,h.aF)(t.fotosRef).then(o=>{o.items.forEach(n=>{(0,h.Jt)(n).then(a=>{"paciente"==t.usuarioActual.perfil?n.fullPath.includes(t.usuarioActual.dni)&&(n.fullPath.includes("perfil")?t.foto1=a:t.foto2=a):n.fullPath.includes(t.usuarioActual.dni)&&(t.foto1=a)})})})})()}getEspecialistas(){const t=(0,d.hJ)(this.fire,"especialistas");return(0,d.BS)(t,{idField:"idDoc"})}getPacientes(){const t=(0,d.hJ)(this.fire,"pacientes");return(0,d.BS)(t,{idField:"idDoc"})}getTurnos(){const t=(0,d.hJ)(this.fire,"turnos");return(0,d.BS)(t)}volver(){this.step--}pdf(){this.step++,this.turnos.forEach(t=>{t.paciente==this.usuarioActual.dni&&this.especialistas.forEach(o=>{t.especialista==o.dni&&(this.currentEspecialistas.some(a=>a.dni==o.dni)||this.currentEspecialistas.push(o))})}),console.log(this.currentEspecialistas)}pdfDownload(t){const o=new A.default,n=new Image;n.src="../../assets/clinicaLogo.png",n.onload=()=>{o.addImage(n,"PNG",10,10,50,25),o.setFontSize(18),o.text(`Informaci\xf3n turnos ${this.usuarioActual.nombre} ${this.usuarioActual.apellido} con especialista ${t.nombre} ${t.apellido}:`,10,50);const a=(0,g.p6)(new Date,"dd/MM/yyyy","en");o.setFontSize(12),o.text(`Fecha de emisi\xf3n: ${a}`,10,60);let s=70;this.turnos.forEach(l=>{l.paciente===this.usuarioActual.dni&&this.especialistas.forEach(di=>{if(l.especialista===di.dni&&("Aceptado"===l.condicion||"Finalizado"===l.condicion)){if(o.setFontSize(12),o.text(`D\xeda: ${l.dia}`,10,s),s+=10,l.historiaClinica){const p=l.historiaClinica;o.text(`Altura: ${p.altura}`,10,s),s+=10,o.text(`Peso: ${p.peso}`,10,s),s+=10,o.text(`Presi\xf3n: ${p.presion}`,10,s),s+=10,o.text(`Temperatura: ${p.temperatura}`,10,s),s+=10,p.dynamicData&&p.dynamicData.length>0&&p.dynamicData.forEach((Z,hi)=>{o.text(`${Z.clave}: ${Z.valor}`,10,s),s+=10})}s+=10,o.setDrawColor(0,0,0),o.setLineWidth(.5),o.line(10,s,200,s),s+=10}})}),o.save(`Informacion_Turnos_${this.usuarioActual.nombre}_${this.usuarioActual.apellido}.pdf`)}}static#i=this.\u0275fac=function(o){return new(o||e)(i.Y36(m.e),i.Y36(T.Ot),i.Y36(d.gg))};static#t=this.\u0275cmp=i.Xpm({type:e,selectors:[["app-mi-perfil"]],decls:12,vars:5,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["href","https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css","rel","stylesheet"],[4,"ngIf"],[1,"floating-button",3,"routerLink"],["class","floating-button-2",3,"click",4,"ngIf"],[1,"profile-container"],[1,"profile-header"],[1,"profile-images"],["src","../../assets/doctor.png","class","profile-img","alt","Foto de perfil",4,"ngIf"],["src","../../assets/patient.png","class","profile-img","alt","Foto de perfil",4,"ngIf"],["src","../../assets/admin.png","class","profile-img","alt","Foto de perfil",4,"ngIf"],[1,"profile-info"],[1,"profile-section"],[1,"section-content"],["alt","Foto de perfil",3,"src"],["class","dni-img","alt","Foto DNI",3,"src",4,"ngIf"],["class","info-container",4,"ngIf"],["src","../../assets/doctor.png","alt","Foto de perfil",1,"profile-img"],["src","../../assets/patient.png","alt","Foto de perfil",1,"profile-img"],["src","../../assets/admin.png","alt","Foto de perfil",1,"profile-img"],["alt","Foto DNI",1,"dni-img",3,"src"],[1,"info-container"],[3,"routerLink"],[3,"click"],[1,"section-content","container","mt-4"],[1,"row"],["class","col-md-6 mb-3",4,"ngFor","ngForOf"],[1,"col-md-6","mb-3"],[1,"card","h-100"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"floating-button-2",3,"click"]],template:function(o,n){1&o&&(i.TgZ(0,"html",0)(1,"head"),i._UZ(2,"meta",1)(3,"meta",2),i.TgZ(4,"title"),i._uU(5,"Perfil del Usuario"),i.qZA(),i._UZ(6,"link",3),i.qZA(),i.TgZ(7,"body"),i.YNc(8,D,21,13,"div",4),i.YNc(9,L,17,8,"div",4),i.qZA(),i._UZ(10,"button",5),i.YNc(11,K,1,0,"button",6),i.qZA()),2&o&&(i.xp6(8),i.Q6J("ngIf",1==n.step),i.xp6(1),i.Q6J("ngIf",2==n.step),i.xp6(1),i.Q6J("routerLink",i.DdM(4,R)),i.xp6(1),i.Q6J("ngIf",1!=n.step))},dependencies:[g.sg,g.O5,f.rH],styles:["body[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#c70707;background-image:url(clinic.0a0eb57132030e74.jpg);background-repeat:no-repeat;background-attachment:fixed;background-size:cover;color:#000;position:absolute;display:flex;align-items:center;justify-content:center}.profile-container[_ngcontent-%COMP%]{background:rgba(255,255,255,.95);border-radius:15px;padding:30px;box-shadow:0 4px 15px #0003;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out;max-width:900px;width:100%}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-bottom:2px solid #ddd;padding-bottom:15px;margin-bottom:30px}.profile-images[_ngcontent-%COMP%]{display:flex;align-items:center}.profile-img[_ngcontent-%COMP%], .dni-img[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 8px #0000001a;width:150px;height:150px;margin-right:15px;animation:_ngcontent-%COMP%_slideIn 1s ease-in-out}h1[_ngcontent-%COMP%]{color:#343a40;margin:0}.profile-info[_ngcontent-%COMP%]{flex:1}.profile-section[_ngcontent-%COMP%]{margin-bottom:30px}h3[_ngcontent-%COMP%]{color:#343a40;margin-bottom:15px}.section-content[_ngcontent-%COMP%]{display:flex;align-items:center}.section-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:350px;height:auto;border-radius:10px;box-shadow:0 4px 8px #0000001a;margin-right:20px}.info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.info-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px;color:#343a40}.info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#555}.info-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:15px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease}.info-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.floating-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;width:140px;height:140px;border-radius:50%;background-color:#f99;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(casa.ee7bd0ec07fb5d4a.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}.horarios-floating-button[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;width:140px;height:140px;border-radius:50%;background-color:#f99;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(time.2c0a8a5963470b83.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}.horarios-text[_ngcontent-%COMP%]{position:fixed;top:170px;right:16px}.floating-button-3[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:140px;height:140px;border-radius:50%;background-color:#f99;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(casa.ee7bd0ec07fb5d4a.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}.floating-button-4[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;width:140px;height:140px;border-radius:50%;background-color:#f99;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(casa.ee7bd0ec07fb5d4a.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}.floating-button-2[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;width:140px;height:140px;border-radius:50%;background-color:#004506;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(volver.4bac84a269842765.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}"],data:{animation:[C.JN]}})}return e})();var W=c(3519),_=c.n(W),u=c(6223);function X(e,r){1&e&&(i.TgZ(0,"div",7)(1,"div",8)(2,"span",9),i._uU(3,"Cargando..."),i.qZA()(),i.TgZ(4,"p",10),i._uU(5,"Cargando..."),i.qZA()())}function V(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"div",29)(1,"input",30),i.NdJ("ngModelChange",function(n){i.CHM(t);const a=i.oxw(2);return i.KtG(a.selectedEspecialidad=n)})("change",function(){i.CHM(t);const n=i.oxw(2);return i.KtG(n.handleEspecialidadChange())}),i.qZA(),i.TgZ(2,"label",31),i._uU(3),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.Q6J("ngModel",t.selectedEspecialidad)("value",t.usuarioActual.especialidad),i.xp6(2),i.Oqu(t.usuarioActual.especialidad)}}function ii(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"div",29)(1,"input",32),i.NdJ("ngModelChange",function(n){i.CHM(t);const a=i.oxw(2);return i.KtG(a.selectedEspecialidad=n)})("change",function(){i.CHM(t);const n=i.oxw(2);return i.KtG(n.handleEspecialidadChange())}),i.qZA(),i.TgZ(2,"label",33),i._uU(3),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.Q6J("ngModel",t.selectedEspecialidad)("value",t.usuarioActual.segundaEspecialidad),i.xp6(2),i.Oqu(t.usuarioActual.segundaEspecialidad)}}function ti(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"div",29)(1,"input",34),i.NdJ("ngModelChange",function(n){i.CHM(t);const a=i.oxw(2);return i.KtG(a.selectedEspecialidad=n)})("change",function(){i.CHM(t);const n=i.oxw(2);return i.KtG(n.handleEspecialidadChange())}),i.qZA(),i.TgZ(2,"label",35),i._uU(3),i.qZA()()}if(2&e){const t=i.oxw(2);i.xp6(1),i.Q6J("ngModel",t.selectedEspecialidad)("value",t.usuarioActual.terceraEspecialidad),i.xp6(2),i.Oqu(t.usuarioActual.terceraEspecialidad)}}function ei(e,r){if(1&e&&(i.TgZ(0,"option",41),i._uU(1),i.qZA()),2&e){const t=r.$implicit;i.Q6J("value",t),i.xp6(1),i.Oqu(t)}}function oi(e,r){if(1&e&&(i.TgZ(0,"option",41),i._uU(1),i.qZA()),2&e){const t=r.$implicit;i.Q6J("value",t),i.xp6(1),i.Oqu(t)}}function ni(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"div",22)(1,"div",15)(2,"div",36)(3,"input",37),i.NdJ("ngModelChange",function(n){const s=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.horarios[s].trabaja=n)}),i.qZA(),i.TgZ(4,"label",38),i._uU(5),i.qZA()()(),i.TgZ(6,"div",39)(7,"label"),i._uU(8,"Entrada"),i.qZA(),i.TgZ(9,"select",40),i.NdJ("ngModelChange",function(n){const s=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.horarios[s].entrada=n)}),i.YNc(10,ei,2,2,"option",25),i.qZA()(),i.TgZ(11,"div",39)(12,"label"),i._uU(13,"Salida"),i.qZA(),i.TgZ(14,"select",40),i.NdJ("ngModelChange",function(n){const s=i.CHM(t).$implicit,l=i.oxw(2);return i.KtG(l.horarios[s].salida=n)}),i.YNc(15,oi,2,2,"option",25),i.qZA()()()}if(2&e){const t=r.$implicit,o=r.index,n=i.oxw(2);i.xp6(3),i.MGl("name","",t,"_trabaja")("id","check-",o,""),i.Q6J("ngModel",n.horarios[t].trabaja),i.xp6(1),i.MGl("for","check-",o,""),i.xp6(1),i.Oqu(t),i.xp6(4),i.MGl("name","",t,"_entrada"),i.Q6J("ngModel",n.horarios[t].entrada)("disabled",!n.horarios[t].trabaja),i.xp6(1),i.Q6J("ngForOf",n.getHoras(t)),i.xp6(4),i.MGl("name","",t,"_salida"),i.Q6J("ngModel",n.horarios[t].salida)("disabled",!n.horarios[t].trabaja),i.xp6(1),i.Q6J("ngForOf",n.getHoras(t))}}function ai(e,r){if(1&e&&(i.TgZ(0,"option",41),i._uU(1),i.qZA()),2&e){const t=r.$implicit;i.Q6J("value",t),i.xp6(1),i.hij("",t," mins")}}function ri(e,r){if(1&e){const t=i.EpF();i.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"h2",14),i._uU(4,"Disponibilidad Horaria"),i.qZA()(),i.TgZ(5,"div",15),i._uU(6,"Especialidad:"),i.qZA(),i.TgZ(7,"div",16),i.YNc(8,V,4,3,"div",17),i.YNc(9,ii,4,3,"div",17),i.YNc(10,ti,4,3,"div",17),i.qZA()(),i.TgZ(11,"div",18)(12,"div",19)(13,"h3",14),i._uU(14),i.qZA()()(),i.TgZ(15,"div",18)(16,"div",19)(17,"h4"),i._uU(18),i.qZA()()(),i.TgZ(19,"form",20),i.NdJ("ngSubmit",function(){i.CHM(t);const n=i.oxw();return i.KtG(n.saveHorarios())}),i.YNc(20,ni,16,13,"div",21),i.TgZ(21,"div",22)(22,"label",23),i._uU(23,"Duraci\xf3n de la sesi\xf3n"),i.qZA(),i.TgZ(24,"div",16)(25,"select",24),i.NdJ("ngModelChange",function(n){i.CHM(t);const a=i.oxw();return i.KtG(a.duracionSesion=n)}),i.YNc(26,ai,2,2,"option",25),i.qZA()()(),i.TgZ(27,"div",26)(28,"div",27)(29,"button",28),i._uU(30,"Guardar"),i.qZA()()()()()}if(2&e){const t=i.oxw();i.xp6(8),i.Q6J("ngIf",t.usuarioActual.especialidad),i.xp6(1),i.Q6J("ngIf",t.usuarioActual.segundaEspecialidad),i.xp6(1),i.Q6J("ngIf",t.usuarioActual.terceraEspecialidad),i.xp6(4),i.AsE("Secci\xf3n Horarios ",t.usuarioActual.nombre," ",t.usuarioActual.apellido,""),i.xp6(4),i.hij("Disponibilidad horaria para ",t.selectedEspecialidad,":"),i.xp6(2),i.Q6J("ngForOf",t.dias),i.xp6(5),i.Q6J("ngModel",t.duracionSesion),i.xp6(1),i.Q6J("ngForOf",t.duraciones)}}const si=function(){return["/mi-perfil"]},ci=[{path:"",component:B,data:{animation:"HomePage"}},{path:"mis-horarios",component:(()=>{class e{constructor(t,o){this.service=t,this.fire=o,this.dias=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],this.duraciones=[30,45,60,75,90,105,120],this.duracionSesion=30,this.horarios={},this.selectedEspecialidad="",this.horariosDB=[],this.loading=!0,this.horariosDB=[],this.loading=!0,this.usuarioActual=t.currentUser,this.usuarioActual=this.usuarioActual.source.value,this.selectedEspecialidad=this.usuarioActual.especialidad,this.initializeEmptyHorarios(),this.getHorarios().subscribe(n=>{this.horariosDB.push(n),setTimeout(()=>{this.initializeHorarios(),this.loading=!1},1500)})}initializeEmptyHorarios(){for(const t of this.dias)this.horarios[t]={trabaja:!1,entrada:"",salida:""}}initializeHorarios(){let t=[];if(this.horariosDB.forEach(o=>{o.forEach(n=>{n.especialista==this.usuarioActual.dni&&(this.selectedEspecialidad==n.especialidad||this.selectedEspecialidad==n.segundaEspecialidad||this.selectedEspecialidad==n.terceraEspecialidad)&&t.push(n)})}),0!=t.length)t.forEach(o=>{this.horarios[o.dia]=o.trabaja?{trabaja:o.trabaja,entrada:o.entrada,salida:o.salida}:{trabaja:!1,entrada:"test",salida:""},this.duracionSesion=o.duracion});else for(const o of this.dias)this.horarios[o]={trabaja:!1,entrada:"",salida:""}}getHoras(t){return this.generateHoras(8,"S\xe1bado"===t?14:19)}generateHoras(t,o){const n=[];for(let a=t;a<=o;a++)n.push(`${a}:00`),a<o&&n.push(`${a}:30`);return n}saveHorarios(){var t=this;let o=!0;console.log("Duraci\xf3n de la sesi\xf3n de "+this.selectedEspecialidad+": "+this.duracionSesion),Object.keys(this.horarios).forEach(n=>{this.compareTimes(this.horarios[n].entrada,this.horarios[n].salida)&&(_().fire({title:"Error al cargar los horarios",text:"Horario de entrada mayor a horario de salida el d\xeda "+n+".",icon:"warning"}),o=!1),this.horarios[n].trabaja&&(""==this.horarios[n].entrada||""==this.horarios[n].salida)&&(_().fire({title:"Error al cargar los horarios",text:"No especifica horario de salida o entrada el d\xeda "+n+".",icon:"warning"}),o=!1)}),o&&(Object.keys(this.horarios).forEach(function(){var n=(0,b.Z)(function*(a){let s=t.selectedEspecialidad+t.usuarioActual.idDoc+a;yield(0,d.pl)((0,d.JU)(t.fire,"horarios",s),{dia:a,duracion:t.duracionSesion,trabaja:t.horarios[a].trabaja,entrada:t.horarios[a].entrada,salida:t.horarios[a].salida,especialidad:t.selectedEspecialidad,especialista:t.usuarioActual.dni})});return function(a){return n.apply(this,arguments)}}()),_().fire({title:"Horarios cargados.",text:"Los horarios para la especialidad "+this.selectedEspecialidad+" han sido guardados con \xe9xito.",icon:"success"}))}convertToTimeObject(t){const[o,n]=t.split(":").map(Number),a=new Date;return a.setHours(o,n,0,0),a}compareTimes(t,o){return this.convertToTimeObject(t)>this.convertToTimeObject(o)}handleEspecialidadChange(){this.initializeHorarios()}getHorarios(){const t=(0,d.hJ)(this.fire,"horarios");return(0,d.BS)(t)}static#i=this.\u0275fac=function(o){return new(o||e)(i.Y36(m.e),i.Y36(d.gg))};static#t=this.\u0275cmp=i.Xpm({type:e,selectors:[["app-mis-horarios"]],decls:11,vars:4,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"],["class","loading-overlay",4,"ngIf"],["class","container",4,"ngIf"],[1,"floating-button",3,"routerLink"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],[1,"text-light","mt-2"],[1,"container"],[1,"row"],[1,"col-12","mb-3"],[1,"text-center"],[1,"col-sm-2"],[1,"col-sm-10"],["class","form-check form-check-inline",4,"ngIf"],[1,"row","mt-4"],[1,"col-12"],[3,"ngSubmit"],["class","form-group row align-items-center",4,"ngFor","ngForOf"],[1,"form-group","row","align-items-center"],[1,"col-sm-2","col-form-label"],["name","duracionSesion",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-sm-12","text-center"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"form-check","form-check-inline"],["type","radio","name","especialidad","id","inlineRadio1",1,"form-check-input",3,"ngModel","value","ngModelChange","change"],["for","inlineRadio1",1,"form-check-label"],["type","radio","name","especialidad","id","inlineRadio2",1,"form-check-input",3,"ngModel","value","ngModelChange","change"],["for","inlineRadio2",1,"form-check-label"],["type","radio","name","especialidad","id","inlineRadio3",1,"form-check-input",3,"ngModel","value","ngModelChange","change"],["for","inlineRadio3",1,"form-check-label"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","name","id","ngModelChange"],[1,"form-check-label",3,"for"],[1,"col-sm-5"],[1,"form-control",3,"ngModel","name","disabled","ngModelChange"],[3,"value"]],template:function(o,n){1&o&&(i.TgZ(0,"html",0)(1,"head"),i._UZ(2,"meta",1)(3,"meta",2),i.TgZ(4,"title"),i._uU(5,"Disponibilidad Horaria"),i.qZA(),i._UZ(6,"link",3),i.qZA(),i.TgZ(7,"body"),i.YNc(8,X,6,0,"div",4),i.YNc(9,ri,31,9,"div",5),i._UZ(10,"a",6),i.qZA()()),2&o&&(i.xp6(8),i.Q6J("ngIf",n.loading),i.xp6(1),i.Q6J("ngIf",!n.loading),i.xp6(1),i.Q6J("routerLink",i.DdM(3,si)))},dependencies:[g.sg,g.O5,u._Y,u.YN,u.Kr,u.Fj,u.Wl,u.EJ,u._,u.JJ,u.JL,u.On,u.F,f.rH],styles:["body[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#c70707;background-image:url(clinic.0a0eb57132030e74.jpg);background-repeat:no-repeat;background-attachment:fixed;background-size:cover;color:#000;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.floating-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;width:140px;height:140px;border-radius:50%;background-color:#f99;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(casa.ee7bd0ec07fb5d4a.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}body[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#c70707;background-image:url(clinic.0a0eb57132030e74.jpg);background-repeat:no-repeat;background-attachment:fixed;background-size:cover;color:#000;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.container[_ngcontent-%COMP%]{background:rgba(255,255,255,.8);padding:20px;border-radius:10px;max-width:600px;width:100%}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{font-weight:700}.floating-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;width:140px;height:140px;border-radius:50%;background-color:#f99;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(casa.ee7bd0ec07fb5d4a.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.loading-overlay[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:4rem;height:4rem}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff;margin-top:10px}"]})}return e})(),canActivate:[(()=>{class e{constructor(t,o){this.service=t,this.router=o}canActivate(){return!!this.service.esEspecialista()||(_().fire({title:"No tiene acceso!",text:"Solo los especialistas tienen acceso a esta p\xe1gina.",icon:"error"}),this.router.navigate(["/login"]),!1)}static#i=this.\u0275fac=function(o){return new(o||e)(i.LFG(m.e),i.LFG(f.F0))};static#t=this.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()]}];let li=(()=>{class e{static#i=this.\u0275fac=function(o){return new(o||e)};static#t=this.\u0275mod=i.oAB({type:e});static#e=this.\u0275inj=i.cJS({imports:[g.ez,u.u5,f.Bz.forChild(ci)]})}return e})()}}]);
"use strict";(self.webpackChunkclinica_online=self.webpackChunkclinica_online||[]).push([[593],{593:(H,f,r)=>{r.r(f),r.d(f,{TurnosModule:()=>P});var _=r(6814),h=r(2271),c=r(3960),u=r(5017),g=r(5588),m=r(9315),l=r(8180),x=r(4664),v=r(2459),t=r(4946),T=r(721),p=r(6223);function b(o,s){1&o&&(t.TgZ(0,"div",7)(1,"div",8)(2,"span",9),t._uU(3,"Cargando..."),t.qZA()(),t.TgZ(4,"p",10),t._uU(5,"Cargando..."),t.qZA()())}function C(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"div",22)(1,"input",23),t.NdJ("ngModelChange",function(e){t.CHM(n);const a=t.oxw(4);return t.KtG(a.espElegido=e)})("change",function(e){t.CHM(n);const a=t.oxw(4);return t.KtG(a.espChange(e))}),t.qZA(),t.TgZ(2,"label",24),t._uU(3),t.qZA()()}if(2&o){const n=s.$implicit,i=t.oxw(4);t.xp6(1),t.s9C("id",n.dni),t.Q6J("ngModel",i.espElegido)("value",n),t.xp6(1),t.s9C("for",n.dni),t.xp6(1),t.AsE("",n.nombre," ",n.apellido,"")}}function Z(o,s){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,C,4,6,"div",21),t.qZA()),2&o){const n=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",n.especialistas)}}function M(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"div",22)(1,"input",25),t.NdJ("ngModelChange",function(e){t.CHM(n);const a=t.oxw(4);return t.KtG(a.espElegido=e)})("change",function(e){t.CHM(n);const a=t.oxw(4);return t.KtG(a.espChange(e))}),t.qZA(),t.TgZ(2,"label",24),t._uU(3),t.qZA()()}if(2&o){const n=s.$implicit,i=t.oxw(4);t.xp6(1),t.s9C("id",n.especialidad),t.Q6J("ngModel",i.espElegido)("value",n),t.xp6(1),t.s9C("for",n.especialidad),t.xp6(1),t.Oqu(n.especialidad)}}function A(o,s){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,M,4,5,"div",21),t.qZA()),2&o){const n=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",n.especialidades)}}function E(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(n);const e=t.oxw().$implicit,a=t.oxw(4);return t.KtG(a.cancelarTurno(e.paciente,e.especialista,e.especialidad,e.dia,e.start))}),t._uU(1,"Cancelar"),t.qZA()}}function q(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,E,2,0,"button",30),t.qZA()()),2&o){const n=s.$implicit;t.xp6(2),t.Oqu(n.dia),t.xp6(2),t.Oqu(n.start),t.xp6(2),t.Oqu(n.especialistaNombre),t.xp6(2),t.Oqu(n.especialidad),t.xp6(2),t.Oqu(n.pacienteNombre),t.xp6(2),t.Oqu(n.condicion),t.xp6(2),t.Q6J("ngIf","Pendiente"==n.condicion)}}function J(o,s){if(1&o&&(t.TgZ(0,"div")(1,"table",26)(2,"thead",27)(3,"tr")(4,"th",28),t._uU(5,"Fecha"),t.qZA(),t.TgZ(6,"th",28),t._uU(7,"Hora"),t.qZA(),t.TgZ(8,"th",28),t._uU(9,"Especialista"),t.qZA(),t.TgZ(10,"th",28),t._uU(11,"Especialidad"),t.qZA(),t.TgZ(12,"th",28),t._uU(13,"Paciente"),t.qZA(),t.TgZ(14,"th",28),t._uU(15,"Estado"),t.qZA(),t.TgZ(16,"th",28),t._uU(17,"Cancelar"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,q,15,7,"tr",29),t.qZA()()()),2&o){const n=t.oxw(3);t.xp6(19),t.Q6J("ngForOf",n.currentTurnos)}}function k(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"h1",13),t._uU(2,"Secci\xf3n turnos"),t.qZA(),t.TgZ(3,"div",14)(4,"input",15),t.NdJ("ngModelChange",function(e){t.CHM(n);const a=t.oxw(2);return t.KtG(a.selected=e)})("change",function(e){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onOptionChange(e))}),t.qZA(),t.TgZ(5,"label",16),t._uU(6,"Especialistas"),t.qZA(),t.TgZ(7,"input",17),t.NdJ("ngModelChange",function(e){t.CHM(n);const a=t.oxw(2);return t.KtG(a.selected=e)})("change",function(e){t.CHM(n);const a=t.oxw(2);return t.KtG(a.onOptionChange(e))}),t.qZA(),t.TgZ(8,"label",18),t._uU(9,"Especialidad"),t.qZA()(),t.YNc(10,Z,2,1,"div",19),t.YNc(11,A,2,1,"div",19),t.YNc(12,J,20,1,"div",12),t.qZA()}if(2&o){const n=t.oxw(2);t.xp6(4),t.Q6J("ngModel",n.selected),t.xp6(3),t.Q6J("ngModel",n.selected),t.xp6(3),t.Q6J("ngIf","option1"===n.selected),t.xp6(1),t.Q6J("ngIf","option2"===n.selected),t.xp6(1),t.Q6J("ngIf","option1"==n.selected||"option2"==n.selected)}}function F(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"h1",13),t._uU(2,"Comentario cancelaci\xf3n turno"),t.qZA(),t.TgZ(3,"div",20)(4,"label",32),t._uU(5,"Explique el motivo de la cancelaci\xf3n del turno"),t.qZA(),t.TgZ(6,"textarea",33),t.NdJ("ngModelChange",function(e){t.CHM(n);const a=t.oxw(2);return t.KtG(a.comentario=e)}),t.qZA()(),t.TgZ(7,"div",34)(8,"button",35),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.cancTurno(e.turnoAEliminar))}),t._uU(9,"Cancelar turno"),t.qZA()()()}if(2&o){const n=t.oxw(2);t.xp6(6),t.Q6J("ngModel",n.comentario)}}function O(o,s){if(1&o&&(t.TgZ(0,"div")(1,"h1",13),t._uU(2,"El turno ha sido cancelado!"),t.qZA(),t.TgZ(3,"h3"),t._uU(4),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(4),t.hij("Motivo: ",n.comentario,"")}}function w(o,s){if(1&o&&(t.TgZ(0,"div",11),t.YNc(1,k,13,5,"div",12),t.YNc(2,F,10,1,"div",12),t.YNc(3,O,5,1,"div",12),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.loading&&1==n.step),t.xp6(1),t.Q6J("ngIf",!n.loading&&2==n.step),t.xp6(1),t.Q6J("ngIf",!n.loading&&3==n.step)}}function U(o,s){if(1&o){const n=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.volver())}),t.qZA()}}const y=function(){return["/mi-perfil"]},N=[{path:"",component:(()=>{class o{ngOnInit(){(0,m.D)({especialidades:this.getEspecialidades().pipe((0,l.q)(1)),especialistas:this.getEspecialistas().pipe((0,l.q)(1)),turnos:this.getTurnos().pipe((0,l.q)(1)),pacientes:this.getPacientes().pipe((0,l.q)(1))}).pipe((0,x.w)(({especialidades:n,especialistas:i,turnos:e,pacientes:a})=>(this.especialidades=n,this.fixEsps(),this.especialistas=i,this.turnos=e,this.pacientes=a,this.getFotos().pipe((0,l.q)(1))))).subscribe({next:n=>{this.fotos=n,this.loading=!1,this.filterFotos()},error:()=>{this.loading=!1}})}constructor(n,i){this.fire=n,this.firebase=i,this.loading=!0,this.storage=(0,u.cF)(this.firebase),this.fotosRef=(0,u.iH)(this.storage),this.selected="option1",this.especialidades=[],this.especialistas=[],this.fotos=[],this.fotosEspecialistas=[],this.chosen="0",this.turnos=[],this.currentTurnos=[],this.pacientes=[],this.step=1,this.comentario=""}volver(){this.step--}onOptionChange(n){this.currentTurnos=[],this.selected=n.target.value}espChange(n){this.currentTurnos=[],this.turnos.forEach(i=>{(i.especialista==this.espElegido.dni||i.especialidad==this.espElegido.especialidad)&&(this.pacientes.forEach(e=>{i.paciente==e.dni&&(i.pacienteNombre=e.nombre+" "+e.apellido)}),this.especialistas.forEach(e=>{i.especialista==e.dni&&(i.especialistaNombre=e.nombre+" "+e.apellido)}),this.currentTurnos.push(i))})}cancelarTurno(n,i,e,a,G){this.turnos.forEach(d=>{d.especialista==i&&d.paciente==n&&d.especialidad==e&&this.pacientes.forEach(Q=>{d.paciente==Q.dni&&this.especialistas.forEach(I=>{d.especialista==I.dni?(this.step++,this.turnoAEliminar=d):console.log("error")})})})}getEspecialidades(){const n=(0,g.hJ)(this.fire,"especialidades");return(0,c.BS)(n)}getEspecialistas(){const n=(0,g.hJ)(this.fire,"especialistas");return(0,c.BS)(n,{idField:"idDoc"})}getPacientes(){const n=(0,g.hJ)(this.fire,"pacientes");return(0,c.BS)(n,{idField:"idDoc"})}getFotos(){return(0,v.D)((0,u.aF)(this.fotosRef)).pipe((0,x.w)(n=>{const i=n.items.map(e=>(0,u.Jt)(e));return(0,m.D)(i)}))}getTurnos(){const n=(0,g.hJ)(this.fire,"turnos");return(0,c.BS)(n,{idField:"idDoc"})}fixEsps(){this.especialidades.pop()}filterFotos(){this.fotos.forEach(n=>{this.especialistas.forEach(i=>{n.includes(i.dni)&&this.fotosEspecialistas.push({nombre:i.nombre,apellido:i.apellido,dni:i.dni,especialidad:i.especialidad,segundaEspecialidad:i.segundaEspecialidad,terceraEspecialidad:i.terceraEspecialidad,foto:n})})})}cancTurno(n){const i=(0,c.JU)(this.fire,"turnos",n.idDoc);(0,c.r7)(i,{condicion:"Cancelado",comentario:this.comentario}),this.step++}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(c.gg),t.Y36(T.Ot))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-turnos"]],decls:11,vars:5,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["class","loading-overlay",4,"ngIf"],["class","container mt-5",4,"ngIf"],["class","floating-button-2",3,"click",4,"ngIf"],[1,"floating-button",3,"routerLink"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-light"],[1,"sr-only"],[1,"text-light","mt-2"],[1,"container","mt-5"],[4,"ngIf"],[1,"title"],["role","group","aria-label","Basic radio toggle button group",1,"btn-group","mb-3"],["type","radio","name","btnradio","id","btnradio1","autocomplete","off","value","option1",1,"btn-check",3,"ngModel","ngModelChange","change"],["for","btnradio1",1,"btn","btn-outline-primary"],["type","radio","name","btnradio","id","btnradio2","autocomplete","off","value","option2",1,"btn-check",3,"ngModel","ngModelChange","change"],["for","btnradio2",1,"btn","btn-outline-primary"],["class","form-group",4,"ngIf"],[1,"form-group"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio","name","especialista",1,"form-check-input",3,"id","ngModel","value","ngModelChange","change"],[1,"form-check-label",3,"for"],["type","radio","name","especialidad",1,"form-check-input",3,"id","ngModel","value","ngModelChange","change"],[1,"table","table-striped","table-bordered","table-hover"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-warning",3,"click"],["for","exampleFormControlTextarea1"],["id","exampleFormControlTextarea1","rows","5",1,"form-control",3,"ngModel","ngModelChange"],[2,"padding-top","20px"],[1,"btn","btn-danger",3,"click"],[1,"floating-button-2",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"html",0)(1,"head"),t._UZ(2,"meta",1)(3,"meta",2),t.TgZ(4,"title"),t._uU(5,"Turnos"),t.qZA()(),t.TgZ(6,"body"),t.YNc(7,b,6,0,"div",3),t.YNc(8,w,4,3,"div",4),t.YNc(9,U,1,0,"button",5),t._UZ(10,"button",6),t.qZA()()),2&i&&(t.xp6(7),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(1),t.Q6J("ngIf",!e.loading&&e.step>1&&3!=e.step),t.xp6(1),t.Q6J("routerLink",t.DdM(4,y)))},dependencies:[_.sg,_.O5,p.Fj,p._,p.JJ,p.On,h.rH],styles:["body[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#c70707;background-image:url(clinic.0a0eb57132030e74.jpg);background-repeat:no-repeat;background-attachment:fixed;background-size:cover;color:#000;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.title[_ngcontent-%COMP%]{font-size:2.5rem;color:#fff;text-align:center;margin-bottom:20px;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.container[_ngcontent-%COMP%]{background:rgba(255,255,255,.8);border-radius:15px;padding:20px;box-shadow:0 10px 20px #0003}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px}.form-check[_ngcontent-%COMP%]{margin-top:10px}.floating-button[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;width:140px;height:140px;border-radius:50%;background-color:#f99;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(casa.ee7bd0ec07fb5d4a.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}.floating-button-2[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;width:140px;height:140px;border-radius:50%;background-color:#004506;color:#fff;border:none;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:background-color .3s ease-in-out;background-image:url(volver.4bac84a269842765.png);background-size:60%;background-position:center;background-repeat:no-repeat;display:flex;flex-direction:column;justify-content:center;align-items:center}.floating-button[_ngcontent-%COMP%]:hover{background-color:#f66}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.loading-overlay[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:4rem;height:4rem}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#fff;margin-top:10px}"]})}return o})()}];let P=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#n=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[_.ez,p.u5,h.Bz.forChild(N)]})}return o})()}}]);